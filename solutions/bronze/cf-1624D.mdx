---
id: cf-1624D
source: CF
title: Palindromes Coloring
author: Rameez Parwez
---

[Official Editorial](https://codeforces.com/blog/entry/98942)

## Explanation

We can greedily solve this problem by first forming palindromic pairs from identical characters.
We add one pair each of the `k` palindromes we want to build, as long as we have `k` pairs available.
Once we are done adding pairs, we can still add one more character to the middle of each palindrome if there are atleast `k` individual characters remaining.

## Implementation

**Time Complexity:** $\mathcal{O}(N)$

<LanguageSection>
<CPPSection>

```cpp
#include <bits/stdc++.h>

int main() {
	int test_num;
	std::cin >> test_num;
	while (test_num--) {

		int n, k;
		std::string st;
		std::array<int, 26> cnt{0};
		std::cin >> n >> k >> st;

		for (char x : st) { cnt[x - 'a']++; }

		int num_pairs = 0, num_odd = 0;
		for (int i = 0; i < 26; i++) {
			num_pairs += cnt[i] / 2;
			num_odd += (cnt[i] % 2 == 1);
		}

		int res = 2 * (num_pairs / k);
		num_odd += 2 * (num_pairs % k);
		res += (num_odd >= k);

		cout << res << '\n';
	}
}
```

</CPPSection>
<JavaSection>

```java
import java.io.*;
import java.util.*;

public class palindromesColoring {
	public static void main(String[] args) {
		Kattio io = new Kattio();
		int testNum = io.nextInt();

		for (int t = 0; t < testNum; t++) {
			int n = io.nextInt();
			int k = io.nextInt();
			String st = io.next();

			int cnt[] = new int[26];
			for (int i = 0; i < n; i++) { cnt[st.charAt(i) - 'a'] += 1; }

			int numPairs = 0, numOdd = 0;
			for (int i = 0; i < 26; i++) {
				numPairs += cnt[i] / 2;
				numOdd += cnt[i] % 2;
			}

			int res = 2 * (numPairs / k);
			numOdd += 2 * (numPairs % k);

			io.println((numOdd >= k) ? res + 1 : res);
		}
		io.close();
	}

	// CodeSnip{Kattio}
}
```

</JavaSection>
<PySection>

```py
from collections import Counter

for _ in range(int(input())):
	n, k = map(int, input().split())
	st = input()

	cnt = Counter(st)

	num_pairs, num_odd = 0, 0

	for c in cnt.values():
		num_pairs += c // 2
		num_odd += c % 2

	res = 2 * (num_pairs // k)
	num_odd += 2 * (num_pairs % k)

	res += num_odd >= k

	print(res)
```

</PySection>
</LanguageSection>
