---
id: kattis-maxcolinear
source: Kattis
title: Maximum Number of Colinear Points
author: Benjamin Qi
---

**Time Complexity:** $\mathcal{O}(N^2\log N)$

Add one to the line passing through each pair of points.

<LanguageSection>
<CPPSection>

```cpp
#include <bits/stdc++.h>
using namespace std;

pair<pair<int, int>, int> getline(pair<int, int> a, pair<int, int> b) {
    pair<int, int> z = {b.first - a.first, b.second - a.second};
    swap(z.first, z.second);

    z.first *= -1;
    int g = __gcd(z.first, z.second);
    z.first /= g;
    z.second /= g;

    z = min(z, {-z.first, -z.second});
    return {z, z.first * a.first + z.second * a.second};
}

int main() {
    int n;
    while (cin >> n) {
        
        if (n == 0) {
            break;
        }

        vector<pair<int, int>> points(n);
        for (int i = 0; i < n; i++) {
            cin >> points[i].first >> points[i].second;
        }
        map<pair<pair<int, int>, int>, int> mp;
        for (int i = 0; i < n; i++) {
            for (int j = i + 1; j < n; j++) {
                mp[getline(points[i], points[j])]++;
            }
        }

        int mx = 0;
        for (auto x : mp) {
            mx = max(mx, x.second);
        }
        int res = 0;
        for (int i = 1; i <= n; i++) {
            if (i * (i - 1) / 2 <= mx) {
                res = i;
            }
        }
        cout << res << '\n';
    }
}
```

</CPPSection>
</LanguageSection>
